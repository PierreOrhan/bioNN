

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>parse module &mdash; BioChemicalNN 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="plot module" href="plotUtils.html" />
    <link rel="prev" title="odeUtils module" href="odeUtils.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: orange" >
          

          
            <a href="index.html" class="icon icon-home"> BioChemicalNN
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="simulOfBioNN.html">SimulOfBioNN package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nnUtils.html">Neural Network module</a></li>
<li class="toctree-l2"><a class="reference internal" href="odeUtils.html">odeUtils module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">parse module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-simulOfBioNN.parseUtils.parser">parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-simulOfBioNN.parseUtils.ecoEvoGenerator">ecoEvoGenerator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plotUtils.html">plot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulNN.html">SimulNN module</a></li>
<li class="toctree-l2"><a class="reference internal" href="smallNetworkSimul.html">smallNetworkSimul module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="paretoPlot.html">paretoPlot package</a></li>
<li class="toctree-l1"><a class="reference internal" href="gettingStarted.html">Getting started</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BioChemicalNN</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="simulOfBioNN.html">SimulOfBioNN package</a> &raquo;</li>
        
      <li>parse module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/parseUtils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parse-module">
<h1>parse module<a class="headerlink" href="#parse-module" title="Permalink to this headline">¶</a></h1>
<p>This module provide translation tool between the ode simulation and tensorflow models.
It is also in this module that one can add function for automatic construction of new models for activation and inhibition.</p>
<div class="section" id="module-simulOfBioNN.parseUtils.parser">
<span id="parser"></span><h2>parser<a class="headerlink" href="#module-simulOfBioNN.parseUtils.parser" title="Permalink to this headline">¶</a></h2>
<p>This file contains all i/o operation to create bio-chemical models.</p>
<p>Format is described in the function.
Some special parsing heuristics are all-ready given, for example to create feed-forward neural network of biochemical reactions.</p>
<dl class="function">
<dt id="simulOfBioNN.parseUtils.parser.generateLayer">
<code class="descclassname">simulOfBioNN.parseUtils.parser.</code><code class="descname">generateLayer</code><span class="sig-paren">(</span><em>nameInputs</em>, <em>nameOutputs</em>, <em>nameE</em>, <em>nameE2</em>, <em>mask</em>, <em>constantValues</em>, <em>endoConstants</em>, <em>activationWriter</em>, <em>inhibitionWriter</em>, <em>complexity=None</em>, <em>pathEquations='models/equations.txt'</em>, <em>pathConstants='models/constants.txt'</em>, <em>nameEndo=None</em>, <em>useProtectionOnActivator=False</em>, <em>useEndoOnInputs=True</em>, <em>useEndoOnOutputs=True</em><span class="sig-paren">)</span><a class="headerlink" href="#simulOfBioNN.parseUtils.parser.generateLayer" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Generate a layer with the given activation and inhibition writer.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nameInputs</strong> – string array, the inputs species name</p></li>
<li><p><strong>nameOutputs</strong> – string array, the output species name</p></li>
<li><p><strong>mask</strong> – the mask connecting input to outputs</p></li>
<li><p><strong>constantValues</strong> – array with values for reactions constants.</p></li>
<li><p><strong>endoConstants</strong> – array with values for the reaction with the endonuclease.</p></li>
<li><p><strong>activationWriter</strong> – function to call for the activation. Should take args as other pre-defined activation function. If provided, the complexity arg is added at the end.</p></li>
<li><p><strong>inhibitionWriter</strong> – function to call for the inhibition. Should take args as other pre-defined inhibition function. If provided, the complexity arg is added at the end.</p></li>
<li><p><strong>complexity</strong> – string, optional parameter for activation or inhibition function that require it.</p></li>
<li><p><strong>nameEndo</strong> – name for the endonuclease, optional. Used when inhibitionWriter == templateInhibWrite.
In this case if none, then the EndoNuclease is not used, and a constant coefficient is used instead.</p></li>
<li><p><strong>useProtectionOnActivator</strong> – default to False. If True then the activators will be link to a protection reaction so that they are not degraded.</p></li>
<li><p><strong>useEndoOnInputs</strong> – default to True, if the inputs are deactivated by endonuclease</p></li>
<li><p><strong>useEndoOnOutputs</strong> – default to True, if the outpurs are deactivated by endonuclease. Please note that the deactivated template are always degraded by the endonuclease.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Parse the layer into the model</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simulOfBioNN.parseUtils.parser.generateNeuralNetwork">
<code class="descclassname">simulOfBioNN.parseUtils.parser.</code><code class="descname">generateNeuralNetwork</code><span class="sig-paren">(</span><em>name</em>, <em>masks</em>, <em>activConstants=None</em>, <em>inhibConstants=None</em>, <em>endoConstant=None</em>, <em>erase=True</em><span class="sig-paren">)</span><a class="headerlink" href="#simulOfBioNN.parseUtils.parser.generateNeuralNetwork" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><dl class="simple">
<dt>Generate a neural network using the autocatalysis models.</dt><dd><p>The reaction constants are believed to be similar among all reactions. (in future dev: either fully given, either modified by a small amount consistently)
if not provided, we use values from Montagne paper.</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – models name</p></li>
<li><p><strong>masks</strong> – neural network architecture: contains the mask at each layer</p></li>
<li><p><strong>activConstants</strong> – <p>reactions constants for activations,
if not provided default to:</p>
<blockquote>
<div><p>26*10**12 for activation reaction with 3 species (template + activator + polymerase)
26*10**6 for activation reaction with 2 species (complex + polymerase)
3 for reactions in the non-natural other way.
7*10**6 for activation reaction with 2 species (complex + nickase)</p>
</div></blockquote>
</p></li>
<li><p><strong>inhibConstants</strong> – </p></li>
<li><p><strong>endoConstant</strong> – constant for endonuclease reaction default to 0.32</p></li>
<li><p><strong>erase</strong> – if we need to erase previous files for the equations, default to True (recommended)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simulOfBioNN.parseUtils.parser.generateTemplateNeuralNetwork">
<code class="descclassname">simulOfBioNN.parseUtils.parser.</code><code class="descname">generateTemplateNeuralNetwork</code><span class="sig-paren">(</span><em>name, masks, complexity=None, activConstants=None, inhibConstants=None, endoConstants=[7000000, 3, 0.32], erase=True, useProtectionOnActivator=False, useEndoOnInputs=True, useEndoOnOutputs=True</em><span class="sig-paren">)</span><a class="headerlink" href="#simulOfBioNN.parseUtils.parser.generateTemplateNeuralNetwork" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Generate a neural network using the template models.
For each reaction a template is used: all species of interests are now small adn strands.
The reaction constants are believed to be similar among all reactions. (in future dev: either fully given, either modified by a small amount consistently)
if not provided, we use values from Montagne paper.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – models name</p></li>
<li><p><strong>masks</strong> – neural network architecture: contains the mask at each layer</p></li>
<li><p><strong>complexity</strong> – to be chosen between [simple,normal,full], default to normal. Represent the level of chemical description we use.
Please refer to module equationWriter for more precisions.</p></li>
<li><p><strong>activConstants</strong> – if not provided default to: ONLY SUPPORTED FOR THE NORMAL MODE!!!
26*10**12 for activation reaction with 3 species (template + activator + polymerase)
26*10**6 for activation reaction with 2 species (complex + polymerase)
3 for reactions in the non-natural other way.
7*10**6 for activation reaction with 2 species (complex + nickase)</p></li>
<li><p><strong>inhibConstants</strong> – constants for activation, if not provided default to similar values than activConstants for similar reactions.</p></li>
<li><p><strong>endoConstants</strong> – constant for endonuclease reaction default to [7*10**6,0.32]
if is explicitely set at None, then we don’t use endonuclease and replace it by a constant of value 0.32.</p></li>
<li><p><strong>erase</strong> – if we need to erase previous files for the equations, default to True (recommended)</p></li>
<li><p><strong>useProtectionOnActivator</strong> – default to False. If True then the activators will be link to a protection reaction so that they are not degraded.</p></li>
<li><p><strong>useEndoOnInputs</strong> – default to True, if the inputs are deactivated by endonuclease</p></li>
<li><p><strong>useEndoOnOutputs</strong> – default to True, if the outpurs are deactivated by endonuclease. Please note that the deactivated template are always degraded by the endonuclease.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simulOfBioNN.parseUtils.parser.parse">
<code class="descclassname">simulOfBioNN.parseUtils.parser.</code><code class="descname">parse</code><span class="sig-paren">(</span><em>equations</em>, <em>kdic</em><span class="sig-paren">)</span><a class="headerlink" href="#simulOfBioNN.parseUtils.parser.parse" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Parse the equations into the correct masks and arrays for computations</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>equations</strong> – <p>a d*n array where d is the number of equations (one sided : -&gt; ) and n the number of species
The syntax should be the following, an array with the stochiometric coefficient of the species: [alpha,-beta] for alpha*A-&gt;beta*B for example</p>
<blockquote>
<div><p>Negative stochiometric coeff represent product when positive represent input.</p>
</div></blockquote>
</p>
</dd>
</dl>
<dl class="simple">
<dt>:param</dt><dd><p>kdic: a d array, the reaction constant for the equation</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>KarrayA,stochio, maskA these different mask are to feed to the function computing the derivative. It is more efficient to compute them beforehand.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simulOfBioNN.parseUtils.parser.read_file">
<code class="descclassname">simulOfBioNN.parseUtils.parser.</code><code class="descname">read_file</code><span class="sig-paren">(</span><em>pathEquations</em>, <em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#simulOfBioNN.parseUtils.parser.read_file" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Parse two file, on for the equations, one for the constants values</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathEquations</strong> – path for the equations.</p></li>
<li><p><strong>path</strong> – path for the constants values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="simulOfBioNN.parseUtils.parser.saveModelWeight">
<code class="descclassname">simulOfBioNN.parseUtils.parser.</code><code class="descname">saveModelWeight</code><span class="sig-paren">(</span><em>model</em>, <em>use_bias</em>, <em>dirName='weightDir'</em><span class="sig-paren">)</span><a class="headerlink" href="#simulOfBioNN.parseUtils.parser.saveModelWeight" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Save model weights so that in can be reused by the parser.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – keras trained model</p></li>
<li><p><strong>use_bias</strong> – if the model use bias or not.</p></li>
<li><p><strong>dirName</strong> – name of the directory where the weight shall be stored.</p></li>
</ul>
</dd>
</dl>
<p>:return</p>
</dd></dl>

<dl class="function">
<dt id="simulOfBioNN.parseUtils.parser.sparseParser">
<code class="descclassname">simulOfBioNN.parseUtils.parser.</code><code class="descname">sparseParser</code><span class="sig-paren">(</span><em>equations</em>, <em>kdic</em><span class="sig-paren">)</span><a class="headerlink" href="#simulOfBioNN.parseUtils.parser.sparseParser" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Parse the equations into the correct masks and arrays for computations, but as sparse matrix</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>equations</strong> – <p>a d*n array where d is the number of equations (one sided : -&gt; ) and n the number of species
The syntax should be the following, an array with the stochiometric coefficient of the species: [alpha,-beta] for alpha*A-&gt;beta*B for example</p>
<blockquote>
<div><p>Negative stochiometric coeff represent product when positive represent input.</p>
</div></blockquote>
</p>
</dd>
</dl>
<dl class="simple">
<dt>:param</dt><dd><p>kdic: a d array, the reaction constant for the equation</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>KarrayA,stochio, maskA these different mask are to feed to the function computing the derivative. It is more efficient to compute them beforehand.
In the sparsity case, stochio is as bit different:</p>
<blockquote>
<div><p>We can’t keep the ones everywhere =&gt; We use the fact that the log will only apply on elements in the data array from the maskA.</p>
</div></blockquote>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-simulOfBioNN.parseUtils.ecoEvoGenerator">
<span id="ecoevogenerator"></span><h2>ecoEvoGenerator<a class="headerlink" href="#module-simulOfBioNN.parseUtils.ecoEvoGenerator" title="Permalink to this headline">¶</a></h2>
<p>In this file we give a function to create and model predator-prey systems using the parser.</p>
<dl class="function">
<dt id="simulOfBioNN.parseUtils.ecoEvoGenerator.generateEcoEvoNetwork">
<code class="descclassname">simulOfBioNN.parseUtils.ecoEvoGenerator.</code><code class="descname">generateEcoEvoNetwork</code><span class="sig-paren">(</span><em>name</em>, <em>activConstants=None</em>, <em>inhibConstants=None</em>, <em>endoConstant=None</em>, <em>erase=True</em><span class="sig-paren">)</span><a class="headerlink" href="#simulOfBioNN.parseUtils.ecoEvoGenerator.generateEcoEvoNetwork" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Generate an network with an ecological competition between two species.
For the moment a simple equation is written down, but could be easily changed to a more complex one, either by hand or by creating other features.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – </p></li>
<li><p><strong>activConstants</strong> – </p></li>
<li><p><strong>inhibConstants</strong> – </p></li>
<li><p><strong>endoConstant</strong> – </p></li>
<li><p><strong>erase</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="plotUtils.html" class="btn btn-neutral float-right" title="plot module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="odeUtils.html" class="btn btn-neutral float-left" title="odeUtils module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Pierre Orhan

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>